<!DOCTYPE html>
<html lang="ko" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>채점 기록</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
    }
    .custom-container {
      padding: 5rem 0;
    }
    .black-han-sans {
       font-family: 'Black Han Sans', sans-serif;
       font-size: 4rem;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .header h2 {
      margin: 0;
    }
    .sort-dropdown {
      width: 150px;
    }
    table {
      width: 100%;
      margin-top: 10px;
      background-color: white;
      box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      overflow: hidden;
    }
    th, td {
      padding: 15px;
      text-align: center;
    }
    th {
      background-color: #f8f9fa;
    }
  </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <!-- 로그인되지 않은 경우 -->
        <li class="nav-item" sec:authorize="isAnonymous()">
          <a class="nav-link" href="/login">로그인</a>
        </li>
        <li class="nav-item" sec:authorize="isAnonymous()">
          <a class="nav-link" href="/signup">회원가입</a>
        </li>

        <!-- 로그인된 경우 -->
        <li class="nav-item" sec:authorize="isAuthenticated()">
          <a class="nav-link" href="/resultList">채점 기록</a>
        </li>
        <li class="nav-item" sec:authorize="isAuthenticated()">
          <a class="nav-link" th:href="@{/logout}">로그아웃</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid bg-light custom-container">
  <div class="text-center">
    <h1 class="mb-3 black-han-sans">스마트 채점봇</h1>
    <h4 class="mb-5">채점 기록</h4>
  </div>
</div>
<br>
<div class="container">
  <div class="header">
    <h2> </h2>
    <div class="form-group sort-dropdown">
      <select class="form-control" id="sortCriteria" onchange="handleSortChange()">
        <option value="grading_date">채점 날짜</option>
        <option value="submission_date">시험 날짜</option>
      </select>
    </div>
  </div>

  <table class="table">
    <thead>
    <tr>
      <th>시험 날짜</th>
      <th>채점 날짜</th>
      <th>상세 보기</th>
      <th>기록 삭제</th>
    </tr>
    </thead>
    <tbody id="recordTableBody">
    <!-- 채점 기록이 여기에 표시됩니다 -->
    </tbody>
  </table>
</div>

<script>
  // 리스트 확인을 위한 예시. 이후 수정 예정
  let records = [
    { id: 1, exam_date: '2024-10-25', grading_date: '2024-11-01' },
    { id: 2, exam_date: '2024-10-20', grading_date: '2024-10-25' },
  ];

  // 기록 목록 표시
  function displayRecords() {
    const tableBody = document.getElementById('recordTableBody');
    tableBody.innerHTML = '';
    records.forEach(record => {
      const row = `<tr>
        <td>${record.exam_date}</td>
        <td>${record.grading_date}</td>
        <td><button class="btn btn-primary btn-sm" onclick="viewDetails(${record.id})">상세 보기</button></td>
        <td><button class="btn btn-danger btn-sm" onclick="deleteRecord(${record.id})">삭제</button></td>
      </tr>`;
      tableBody.insertAdjacentHTML('beforeend', row);
    });
  }

  // 기록 삭제
  function deleteRecord(recordId) {
    if (confirm("해당 기록을 삭제하시겠습니까?")) {
      records = records.filter(record => record.id !== recordId);
      displayRecords(); // 삭제 후 업데이트
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    displayRecords();  // 기본 데이터 표시
  });
</script>

</body>
</html>
