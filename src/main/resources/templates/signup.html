<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>스마트 채점봇 회원가입</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap">
  <style>
      /* CSS 스타일 */
      body {
          font-family: 'Noto Sans KR', sans-serif;
          margin: 0;
          padding: 0;
          height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
          background-color: #f0f0f0;
      }
      table {
          width: 400px;
          height: 600px;
          font-size: 18px;
          background-color: white;
          padding: 30px;
          box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
          border-radius: 10px;
          text-align: center;
      }
      td {
          vertical-align: middle;
          padding-top: 10px;
      }
      input[type="text"], input[type="password"] {
          width: 360px;
          height: 40px;
          font-size: 18px;
          border: 0;
          border-radius: 20px;
          outline: none;
          padding-left: 15px;
          margin-bottom: 15px;
          background-color: rgb(233,233,233);
          text-align: left;
      }
      .btn {
          width: 360px;
          height: 40px;
          font-size: 18px;
          border: 0;
          border-radius: 20px;
          outline: none;
          background-color: rgb(164, 199, 255);
          margin-bottom: 15px;
      }
      .btn:active {
          background-color: rgb(61, 135, 255);
      }
  </style>
</head>
<body>

<form action="/user" method="POST" id="signupForm">
  <table>
    <tr>
      <td><h2>회원가입</h2></td>
    </tr>
    <tr>
      <td>이메일</td>
    </tr>
    <tr>
      <td><input type="text" id="email" name="email" placeholder="단국대학교 계정 이메일을 입력해주세요." required></td>
    </tr>
    <tr>
      <td>비밀번호</td>
    </tr>
    <tr>
      <td><input type="password" name="password" placeholder="비밀번호를 입력해주세요." required></td>
    </tr>
    <tr>
      <td>
        <!-- 이메일 인증 버튼 -->
        <button type="button" class="btn" onclick="sendNumber()">이메일 인증</button>
      </td>
    </tr>
    <tr id="verificationField" style="display:none;">
      <td>인증 번호</td>
    </tr>
    <tr id="verificationInputField" style="display:none;">
      <td><input type="text" id="verificationCode" name="verificationCode" placeholder="인증 번호를 입력해주세요."></td>
    </tr>
    <tr id="confirmButtonField" style="display:none;">
      <td>
        <!-- 인증 확인 버튼 -->
        <button type="button" class="btn" onclick="confirmNumber()">인증 확인</button>
      </td>
    </tr>
    <tr>
      <td><button type="submit" class="btn btn-primary">가입하기</button></td>
    </tr>
  </table>
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">
    function sendNumber(){
        $("#mail_number").css("display","block");
        $.ajax({
            url:"/mail",
            type:"post",
            dataType:"json",
            data:{"mail" : $("#email").val()},
            success: function(data){
                alert("인증번호 발송");
                $("#Confirm").attr("value",data);
            },
            error:function(request, status, error){
		      alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
	        }
        });
    }

    function confirmNumber(){
        var number1 = $("#number").val();
        var number2 = $("#Confirm").val();

        if(number1 == number2){
            alert("인증되었습니다.");
        }else{
            alert("번호가 다릅니다.");
        }
    }
</script>

</body>
</html>
